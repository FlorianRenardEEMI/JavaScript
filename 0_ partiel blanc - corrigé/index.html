<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./styles/style.css">
    <title>Document</title>
</head>
<body>
    <div class="distrib">

        <div class="coins">
            <button class="btn" onclick="addCoin(10)">0,1 €</button>
            <button class="btn" onclick="addCoin(20)">0,2 €</button>
            <button class="btn" onclick="addCoin(50)">0,5 €</button>
            <button class="btn" onclick="addCoin(100)">1 €</button>
            <button class="btn" onclick="addCoin(200)">2 €</button>
        </div>
    
        <div class="pad">
            <div class="row">
                <button class="btn" onclick="selectNumber(1)">1</button>
                <button class="btn" onclick="selectNumber(2)">2</button>
                <button class="btn" onclick="selectNumber(3)">3</button>
            </div>
            <div class="row">
                <button class="btn" onclick="selectNumber(4)">4</button>
                <button class="btn" onclick="selectNumber(5)">5</button>
                <button class="btn" onclick="selectNumber(6)">6</button>
            </div>
            <div class="row">
                <button class="btn" onclick="selectNumber(7)">7</button>
                <button class="btn" onclick="selectNumber(8)">8</button>
                <button class="btn" onclick="selectNumber(9)">9</button>
            </div>
        </div>
    
        <div id="message">PUSH</div>
    
    </div>

    <script type="text/javascript">
    
    // Liste des produits, tous les prix dans le code sont en centimes
let products = {
    1: {
        name: 'Coca-Cola',
        price: 80
    },
    2: {
        name: 'Gauffre',
        price: 200
    },
    3: {
        name: 'KitKat',
        price: 120
    },
    4: {
        name: 'M&Ms',
        price: 150
    }
};

let coins = 0;

function addCoin(coin) {

    coins += coin; // ajoute de l'argent

    document.getElementById('message').innerHTML = (coins / 100) + ' €'; // affiche la somme totale ajoutée

}

function selectNumber(number) {

    if (products[number]) { // teste si l'élement existe dans l'objet

        let product = products[number]; // raccourci du produit

        if (coins >= product.price) { // vérifie si on ajouté assez d'argent

            coins -= product.price; // enleve le prix du produit à l'argent qu'on a ajouté

            document.getElementById('message').innerHTML = product.name + ' - ' + (product.price / 100) + ' € - Reste ' + (coins / 100) + ' €';
            // Affiche le produit, son prix et l'argent restant

            delete products[number]; // Bonus : enlever le produit

        } else { // Pas assez d'argent
            document.getElementById('message').innerHTML = 'Pas assez d\'argent !';
        }

    } else { // Le produit n'existe pas
        document.getElementById('message').innerHTML = 'Le produit n\'existe pas !';
    }

}
    

    </script>

</body>
</html>